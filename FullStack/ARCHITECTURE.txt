ARCHITECTURE GUIDELINES

1. MODULAR DESIGN
   - Core Engine (`core/`): Rendering engines (`sprites.py`), UI system (`ui.py`), and Audio Synthesis (`sound_engine.py`).
   - Simulation Modules (`simulation/`): Self-contained "Site" files. Each site file
     encapsulates both the specific data structure logic and its corresponding
     Pygame visualization class.
   - Controller (`main.py`): A robust State Machine handling the "Facility Overview,"
     scene transitions, global display settings, and the Music Sequencer.

2. LOGIC LAYER (The Backend)
   - Pure Python classes decoupled from Pygame.
   - `StackManager` / `QueueManager`: Handle LIFO/FIFO operations and return event logs.
   - `LinkedListManager`: Manages Node pointers.
   - `BSTManager` / `ExpressionTreeManager`: Handle recursive tree structures.
   - `SortingManager`: Generates step-by-step animation frames for algorithms.
   - `RecursionManager`: Solves Hanoi states.
   - `ArrayManager`: Manages fixed-size lists with explicit Read/Write receipts.

3. VISUALIZATION LAYER (The Frontend)
   - Procedural Generation:
     - All assets (buildings, trucks, terrain) are drawn via code (pygame.draw).
     - "Industrial Night Shift" Aesthetic: Dark concrete, hazard yellow markings, 
       and dynamic lighting.
   - Facility Overview (`main.py`):
     - `Facility` Class: Handles 2.5D building projection, procedural details (vents, pipes),
       and specific mechanical animations (fans, elevators, cranes).
     - Lighting System: Uses gradient alpha blending to create soft spotlights and 
       glow effects on hover.
   - Simulation Views:
     - Specific sprites (`ForkliftSprite`, `DroneSprite`, `GantryCrane`) handle 
       complex interpolation and state transitions (e.g., Move -> Lift -> Drop).

4. UI & INTERACTION
   - Style: Rugged Industrial Scanner (WMS Handheld).
   - Components: 
     - `HandheldChassis`: Draws the device body.
     - `LCDDisplay`: Handles text input and status messages.
     - `IndustrialLabel`: High-contrast floating labels in the Overworld.
   - Transitions:
     - "System Uplink": A fade-to-black terminal effect when switching modules 
       to simulate remote connection.

5. AUDIO LAYER (The Synthesizer)
   - Zero-Asset Philosophy: No external .mp3 or .wav files are used.
   - `SoundGenerator`: Uses Python's `math` and `array` libraries to generate raw PCM 
     audio buffers (Sine, Square, Sawtooth, White Noise) at runtime.
   - `MusicSequencer`: A state-based conductor that runs alongside the game loop.
     - Adaptive Themes: Changes musical scales (e.g., C Minor to F Minor) and 
       rhythmic density based on the active facility.
     - Procedural Composition: Randomizes melody and percussion within strict 
       music theory rules (Pentatonic scales) to ensure infinite, non-repetitive background audio.